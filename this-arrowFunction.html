<div></div>
<button id="button">버튼</button>
<script>
  // this1 일반 함수에서는 window
  // this 2 오브젝트 내 메소드에서 쓰면 그 메소드를 가지고 있는 오브젝트
  // this의 3번째
  // 오브젝트 생성기계 constructor
  function 기계 () {
    this.이름 = 'Kim'
  }

  // constructor에서 오브젝트 생산하는 법
  var 오브젝트 = new 기계();

  // this의 4번째
  // 이벤트 리스너
  document.getElementById('button').addEventListener('click',
  function (e) {
    // this; e.currentTarget;
    console.log(this);
    console.log(e.currentTarget);
    // 지금 이벤트 동작하는 곳

    // case study 1.
    var array = [1,2,3];
    array.forEach(function (a){
      console.log(this);
    });
    // 함수안에 들어가는 함수 = 콜백함수

  })

  // case study 2. 오브젝트 내에서 콜백함수를 쓴다면 this는?
  var object1 = {
    names: ['kim','lee','park'],
    fn: function (){
      // object가 출력됨
      console.log(this);
      object1.names.forEach(function () {
        // window가 출력됨
        console.log(this);
      })
    }
  }

  object1.fn();

  // case study 3.
  /* arrow function 안에서의 this?
  arrow function 특징 : 
  내부의 this 값을 변화시키지 않음. (외부 this 값 그대로 재사용 가능) */
  var object2 = {
    names: ['kim','lee','park'],
    fn: function (){
      // object가 출력됨
      console.log(this);
      object2.names.forEach(() => {
        // arrow function 안에서의 this는 상위 요소의 this를 받아옴
        // this를 재설정하지 않고 위의 값을 그대로 받아오고 싶을 때 arrow function 사용
        console.log(this);
      })
    }
  }

  object2.fn();


  // 함수 만드는 방법 1&2

  /* 
  1.
  function 함수 (){}

  2.
  var 함수 = function (){}

  3.
  var 함수 = () => {}
  함수 (); 
  

  함수는
  1. 코드들을 기능으로 묶고 싶을 때 사용
  2. 입출력 기계를 만들고 싶을 때 사용

  arrow function의 장점
  1. 입출력 기계 만들 때 직관적으로 쓸 수 있다
  2. 소괄호 생략 가능 (파라미터가 1개 일 때)
  3. 코드 한줄이면 중괄호도 생략 가능 

  */

// arrow function 1. forEach 콜백함수
[1,2,3,4].forEach(a => console.log(a));

document.getElementById('button').addEventListener('click',
  (e) => {
    // arrow 함수에서는 함수 내의 this값을 재정의 하지 않음
    e.currentTarget;
    this; // -> window 
  }
)

// 3. object안의 함수
var object = {
  fun: () => {
    this // -> window 가 나옴
    return this
  }
}

object.fun()

// 1. 간단한 메소드 만들기
var 사람 = {
  name: '손흥민',
  sayHi:()=>{
    console.log('안녕 나는 '+사람.name);
  }
}

사람.sayHi();

// 2. 오브젝트 내의 데이터를 전부 더해주는 메소드 만들기 / 15가 나와야함
var 자료 = {
  data: [1,2,3,4,5],
  전부더하기: () => {
    let 합 = 0;
    자료.data.forEach((a)=>{
      합 += a
    })
    console.log('합',합)
  }
}
자료.전부더하기()

// 3. setTimeout 이용
function 함수 (){
  console.log('버튼이에요');
}
document.getElementById('button').addEventListener('click', function (){
  setTimeout(함수,1000)
})

</script>
